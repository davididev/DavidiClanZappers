[gd_scene load_steps=12 format=3 uid="uid://0d7fefogfmkf"]

[ext_resource type="Script" path="res://Scripts/Global/Enemy/EnemyBase.gd" id="1_ggw3h"]
[ext_resource type="Script" path="res://Scripts/Global/Enemy/BrainTransitionResource.gd" id="2_ny08x"]
[ext_resource type="PackedScene" uid="uid://bj86i4actyt73" path="res://Prefabs/Player/drop_shadow.tscn" id="3_3xe4v"]
[ext_resource type="PackedScene" uid="uid://cnp447641kcs8" path="res://Graphics/Enemies/Zombie/ZombieModel.glb" id="4_ewetc"]
[ext_resource type="Material" uid="uid://d0xqxu0rjsjhg" path="res://Graphics/Enemies/Zombie/M_Zombie.tres" id="5_xwux6"]
[ext_resource type="AnimationNodeStateMachine" uid="uid://7r0722bkb4r" path="res://Graphics/Enemies/Zombie/ZomibeRun.tres" id="6_5wb8k"]
[ext_resource type="Script" path="res://Scripts/Global/Enemy/BrainWaitForPlayer.gd" id="7_grrsg"]
[ext_resource type="Script" path="res://Scripts/Global/Enemy/BrainFollowPlayer.gd" id="8_27cdu"]

[sub_resource type="Resource" id="Resource_6bxb3"]
script = ExtResource("2_ny08x")
cond = Array[int]([0, 2])
values = Array[float]([0.9, 3.0])
operator = 1

[sub_resource type="Resource" id="Resource_eu7n3"]
script = ExtResource("2_ny08x")
cond = Array[int]([3])
values = Array[float]([1.0])
operator = 0

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_h5276"]
radius = 0.9
height = 1.8

[node name="ZombieRun" type="RigidBody3D" groups=["SerializedNode"]]
top_level = true
collision_layer = 16
collision_mask = 7
axis_lock_angular_x = true
axis_lock_angular_z = true
contact_monitor = true
max_contacts_reported = 2
linear_damp_mode = 1
linear_damp = 200.0
angular_damp = 200.0
script = ExtResource("1_ggw3h")
renderers = Array[NodePath]([NodePath("CollisionShape3D/ZombieModel/godot_rig/Skeleton3D/DONOTCOPY_ZombieSource")])
look_at_transform = NodePath("CollisionShape3D/LookAt")
TouchDamage = 8
MaxHealth = 24.0
tree = NodePath("CollisionShape3D/ZombieModel/AnimationTree")
brains = Array[NodePath]([NodePath("CollisionShape3D/Brain_WaitForPlayer"), NodePath("CollisionShape3D/Brain_FollowPlayer")])
brainTransitions = Array[ExtResource("2_ny08x")]([SubResource("Resource_6bxb3"), SubResource("Resource_eu7n3")])
IdleName = "Idle"
MoveName = "Run"
MoveSpeed = 100.0
MaxVelocity = 20.0
maxCoinsOnDeath = 5
chanceOfHeart = 30

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_h5276")

[node name="DropShadow" parent="CollisionShape3D" instance=ExtResource("3_3xe4v")]

[node name="ZombieModel" parent="CollisionShape3D" instance=ExtResource("4_ewetc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.174666, 0.0479258, 0.881587)

[node name="Skeleton3D" parent="CollisionShape3D/ZombieModel/godot_rig" index="0"]
bones/1/scale = Vector3(1, 1, 1)
bones/2/rotation = Quaternion(-0.0920319, -1.18703e-07, -1.09711e-08, 0.995756)
bones/2/scale = Vector3(1, 1, 1)
bones/3/rotation = Quaternion(-0.0499216, 1.42818e-14, -1.06471e-15, 0.998753)
bones/4/rotation = Quaternion(-0.014206, 1.19197e-07, -1.69348e-09, 0.999899)
bones/4/scale = Vector3(1, 1, 1)
bones/5/rotation = Quaternion(0.0783222, -4.45458e-16, 1.86735e-08, 0.996928)
bones/6/rotation = Quaternion(-0.0394934, -1.3972e-14, -9.41597e-09, 0.99922)
bones/7/rotation = Quaternion(0.919319, -3.86451e-14, 2.19183e-07, 0.393513)
bones/10/rotation = Quaternion(-0.595271, -0.340098, -0.361493, 0.631909)
bones/10/scale = Vector3(1, 1, 1)
bones/11/rotation = Quaternion(0.177869, 0.684513, -0.177418, 0.684344)
bones/12/rotation = Quaternion(0.0312397, -7.03484e-05, 2.17808e-06, 0.999512)
bones/13/rotation = Quaternion(-0.0191575, -5.16208e-07, -2.49959e-07, 0.999816)
bones/13/scale = Vector3(1, 1, 1)
bones/14/scale = Vector3(1, 1, 1)
bones/17/rotation = Quaternion(0.247381, 0.945803, 0.20348, 0.0534363)
bones/17/scale = Vector3(1, 1, 1)
bones/18/rotation = Quaternion(-0.000135737, -0.000229774, 4.79338e-05, 1)
bones/18/scale = Vector3(1, 1, 1)
bones/19/rotation = Quaternion(0.000247873, 8.09188e-05, -0.000535356, 1)
bones/19/scale = Vector3(1, 1, 1)
bones/20/scale = Vector3(1, 1, 1)
bones/21/rotation = Quaternion(0.178625, -0.684258, 0.178203, 0.684199)
bones/21/scale = Vector3(1, 1, 1)
bones/22/rotation = Quaternion(0.0301132, -1.02065e-05, 3.2415e-07, 0.999546)
bones/23/rotation = Quaternion(-0.0191577, 5.16216e-07, 2.52243e-07, 0.999816)
bones/24/rotation = Quaternion(-1.19711e-07, -0.70711, -2.64575e-07, 0.707103)
bones/27/rotation = Quaternion(-0.247412, 0.945795, 0.203441, -0.0535835)
bones/28/scale = Vector3(1, 1, 1)
bones/29/rotation = Quaternion(0.000248123, -7.72167e-05, 0.00053562, 1)
bones/29/scale = Vector3(1, 1, 1)
bones/30/rotation = Quaternion(-9.7153e-08, 0.68548, 0.728092, 5.17523e-08)
bones/31/rotation = Quaternion(-9.71531e-08, 0.68548, 0.728092, 5.17523e-08)
bones/31/scale = Vector3(1, 1, 1)
bones/32/rotation = Quaternion(0.99371, 2.63646e-08, 2.33948e-07, 0.111985)
bones/32/scale = Vector3(1, 1, 0.999997)
bones/33/rotation = Quaternion(0.192288, -1.11883e-07, 4.89587e-08, 0.981339)
bones/33/scale = Vector3(1, 1, 1)
bones/34/rotation = Quaternion(-0.663032, -0.000387606, 0.000343306, 0.74859)
bones/35/rotation = Quaternion(-0.000137096, 0.964307, -0.264786, -0.00049932)
bones/35/scale = Vector3(1, 1, 1)
bones/36/rotation = Quaternion(0.99371, 2.63646e-08, 2.33948e-07, 0.111985)
bones/36/scale = Vector3(1, 1, 0.999997)
bones/37/rotation = Quaternion(0.192288, -1.11883e-07, 4.89587e-08, 0.981339)
bones/38/rotation = Quaternion(-0.663032, -0.000387606, 0.000343306, 0.74859)
bones/39/rotation = Quaternion(-0.000137096, 0.964307, -0.264787, -0.00049932)
bones/41/rotation = Quaternion(0.5, -0.5, -0.5, 0.5)
bones/51/rotation = Quaternion(0.790468, 7.3016e-08, 9.42312e-08, 0.612503)
bones/51/scale = Vector3(1, 1, 1)
bones/55/rotation = Quaternion(0.192288, -1.11883e-07, 4.89586e-08, 0.981339)
bones/56/rotation = Quaternion(-0.663033, -0.000387606, 0.000343306, 0.74859)
bones/56/scale = Vector3(1, 1, 1)
bones/57/rotation = Quaternion(-0.000137096, 0.964307, -0.264786, -0.00049932)
bones/63/rotation = Quaternion(5.21541e-08, -0.000221668, -1.07304e-11, 1)
bones/63/scale = Vector3(1, 1, 1)
bones/64/rotation = Quaternion(-8.19564e-08, 0.000221669, 1.40137e-11, 1)
bones/64/scale = Vector3(1, 1, 1)
bones/69/rotation = Quaternion(0.192288, -1.11883e-07, 4.89586e-08, 0.981339)
bones/70/rotation = Quaternion(-0.663033, -0.000387606, 0.000343306, 0.74859)
bones/70/scale = Vector3(1, 1, 1)
bones/71/rotation = Quaternion(-0.000137096, 0.964307, -0.264786, -0.00049932)
bones/72/rotation = Quaternion(-0.614365, 0.614727, 0.350079, 0.349443)
bones/77/rotation = Quaternion(5.21541e-08, -0.000221668, -1.07304e-11, 1)
bones/77/scale = Vector3(1, 1, 1)
bones/78/rotation = Quaternion(-8.19564e-08, 0.000221669, 1.40137e-11, 1)
bones/78/scale = Vector3(1, 1, 1)
bones/82/rotation = Quaternion(0.99371, 1.30149e-08, 1.15488e-07, 0.111985)
bones/82/scale = Vector3(1, 1, 1)
bones/86/rotation = Quaternion(-0.663032, -0.000387606, 0.000343305, 0.748591)
bones/86/scale = Vector3(1, 1, 1)
bones/88/rotation = Quaternion(-0.000137096, 0.964307, -0.264787, -0.000499319)
bones/91/rotation = Quaternion(-0.0887159, -2.38528e-14, -2.11515e-08, 0.996057)
bones/91/scale = Vector3(1, 1, 1)
bones/93/rotation = Quaternion(0.99371, 2.63646e-08, 2.33948e-07, 0.111985)
bones/93/scale = Vector3(1, 1, 1)
bones/95/rotation = Quaternion(0.99371, 1.30149e-08, 1.15488e-07, 0.111985)
bones/95/scale = Vector3(1, 1, 1)
bones/99/rotation = Quaternion(-0.663032, -0.000387606, 0.000343305, 0.748591)
bones/99/scale = Vector3(1, 1, 1)
bones/101/rotation = Quaternion(-0.000137096, 0.964307, -0.264787, -0.000499319)
bones/104/rotation = Quaternion(-0.0887159, -2.38528e-14, -2.11515e-08, 0.996057)
bones/104/scale = Vector3(1, 1, 1)
bones/106/rotation = Quaternion(0.99371, 2.63646e-08, 2.33948e-07, 0.111985)
bones/106/scale = Vector3(1, 1, 1)
bones/108/rotation = Quaternion(-0.0920321, -1.18703e-07, -1.09711e-08, 0.995756)
bones/113/rotation = Quaternion(0.0499216, 0, 0, 0.998753)
bones/114/rotation = Quaternion(-0.0499216, 0, 0, 0.998753)
bones/116/scale = Vector3(1, 1, 1)
bones/117/rotation = Quaternion(0.68548, 8.67953e-08, 8.17155e-08, 0.728092)
bones/118/rotation = Quaternion(0.0783222, 6.29209e-15, 1.86735e-08, 0.996928)
bones/119/rotation = Quaternion(-0.0394935, -6.43043e-15, -9.41597e-09, 0.99922)
bones/120/rotation = Quaternion(0.919319, 3.0916e-14, 2.19183e-07, 0.393513)
bones/121/rotation = Quaternion(0.699167, -8.53831e-08, 8.3504e-08, 0.714959)
bones/122/rotation = Quaternion(0.699167, -8.53831e-08, 8.3504e-08, 0.714959)
bones/123/rotation = Quaternion(0.699167, -8.53831e-08, 8.3504e-08, 0.714959)
bones/124/rotation = Quaternion(0.699167, -8.53831e-08, 8.3504e-08, 0.714959)
bones/125/rotation = Quaternion(0.919319, 3.0916e-14, 2.19183e-07, 0.393513)
bones/126/scale = Vector3(1, 1, 1)
bones/127/rotation = Quaternion(0.7404, 8.01286e-08, 8.82625e-08, 0.672167)
bones/128/rotation = Quaternion(-0.7404, -8.01286e-08, -8.82625e-08, 0.672167)
bones/129/rotation = Quaternion(0.713276, 8.35518e-08, 8.50291e-08, 0.700883)
bones/135/rotation = Quaternion(0.177868, 0.684513, -0.177418, 0.684345)
bones/135/scale = Vector3(1, 1, 1)
bones/136/rotation = Quaternion(0.0312397, -7.02118e-05, 2.16315e-06, 0.999512)
bones/138/rotation = Quaternion(-1.3273e-09, 0.70711, -1.32731e-09, 0.707104)
bones/141/rotation = Quaternion(0.247381, 0.945803, 0.20348, 0.0534366)
bones/141/scale = Vector3(1, 1, 1)
bones/142/rotation = Quaternion(-0.000135701, -0.000229799, 4.78382e-05, 1)
bones/142/scale = Vector3(1, 1, 1)
bones/143/rotation = Quaternion(0.000247866, 8.09172e-05, -0.000535319, 1)
bones/143/scale = Vector3(1, 1, 1)
bones/148/rotation = Quaternion(-1.26409e-09, 0.70711, -1.2641e-09, 0.707104)
bones/157/rotation = Quaternion(-1.3273e-09, 0.70711, -1.32731e-09, 0.707104)
bones/158/rotation = Quaternion(0.247383, 0.945802, 0.203479, 0.053438)
bones/158/scale = Vector3(1, 1, 1)
bones/160/rotation = Quaternion(-0.000135772, -0.000231351, 4.89254e-05, 1)
bones/160/scale = Vector3(1, 1, 1)
bones/162/rotation = Quaternion(0.00024781, 8.15982e-05, -0.000535739, 1)
bones/162/scale = Vector3(1, 1, 1)
bones/164/rotation = Quaternion(0.999999, -3.76167e-09, -0.0011849, -3.72529e-09)
bones/164/scale = Vector3(1, 1, 1)
bones/167/rotation = Quaternion(0.247381, 0.945803, 0.20348, 0.0534366)
bones/167/scale = Vector3(1, 1, 1)
bones/174/rotation = Quaternion(1.49019e-08, 3.52859e-05, 1.35671e-12, 1)
bones/175/rotation = Quaternion(0.000301253, 5.13047e-05, -0.251225, 0.967929)
bones/176/rotation = Quaternion(0.000251588, -0.000173612, 0.49633, 0.868134)
bones/176/scale = Vector3(1, 1, 1)
bones/177/rotation = Quaternion(0.493955, 0.506042, -0.493886, 0.505971)
bones/177/scale = Vector3(1, 1, 1)
bones/178/rotation = Quaternion(0.0312397, -7.0241e-05, 2.17446e-06, 0.999512)
bones/182/rotation = Quaternion(-0.0120858, 1.77012e-07, -1.6927e-06, 0.999927)
bones/183/rotation = Quaternion(0.0312397, -7.04183e-05, 2.17994e-06, 0.999512)
bones/188/rotation = Quaternion(0.0301131, -1.03611e-05, 3.32914e-07, 0.999546)
bones/189/rotation = Quaternion(-0.0191575, 2.38374e-07, -1.51489e-08, 0.999816)
bones/190/rotation = Quaternion(8.74874e-16, -0.70711, 4.42391e-16, 0.707104)
bones/190/scale = Vector3(1, 1, 1)
bones/193/rotation = Quaternion(-0.247413, 0.945795, 0.203441, -0.0535839)
bones/194/scale = Vector3(1, 1, 1)
bones/195/rotation = Quaternion(0.00024808, -7.72218e-05, 0.000535596, 1)
bones/195/scale = Vector3(1, 1, 1)
bones/196/rotation = Quaternion(8.74874e-16, -0.70711, 4.42391e-16, 0.707104)
bones/196/scale = Vector3(1, 1, 1)
bones/197/rotation = Quaternion(-0.247413, 0.945795, 0.203441, -0.053584)
bones/197/scale = Vector3(1, 1, 1)
bones/200/rotation = Quaternion(8.74874e-16, -0.70711, 4.42391e-16, 0.707104)
bones/200/scale = Vector3(1, 1, 1)
bones/209/rotation = Quaternion(8.74874e-16, -0.70711, 4.42391e-16, 0.707104)
bones/209/scale = Vector3(1, 1, 1)
bones/210/rotation = Quaternion(-0.247413, 0.945795, 0.20344, -0.0535842)
bones/210/scale = Vector3(1, 1, 1)
bones/212/scale = Vector3(1, 1, 1)
bones/214/rotation = Quaternion(0.000248028, -7.79055e-05, 0.000536054, 1)
bones/214/scale = Vector3(1, 1, 1)
bones/216/rotation = Quaternion(0.999999, 5.6949e-08, 0.00119229, 3.1665e-08)
bones/216/scale = Vector3(1, 1, 1)
bones/219/rotation = Quaternion(-0.247413, 0.945795, 0.203441, -0.0535839)
bones/227/rotation = Quaternion(0.000301163, -5.17005e-05, 0.252316, 0.967645)
bones/228/scale = Vector3(1, 1, 1)
bones/229/rotation = Quaternion(0.494485, -0.505444, 0.494496, 0.505455)
bones/230/rotation = Quaternion(0.0301132, -1.03526e-05, 3.28423e-07, 0.999546)
bones/233/rotation = Quaternion(0.499995, -0.499995, 0.500005, 0.500005)
bones/234/rotation = Quaternion(-0.0109589, -1.65055e-07, -2.31256e-07, 0.99994)
bones/235/rotation = Quaternion(0.0301132, -1.01878e-05, 3.23558e-07, 0.999546)
bones/236/scale = Vector3(1, 1, 1)
bones/239/rotation = Quaternion(-9.71531e-08, 0.68548, 0.728092, 5.17523e-08)
bones/239/scale = Vector3(1, 1, 1)
bones/241/rotation = Quaternion(-9.71531e-08, 0.68548, 0.728092, 5.17523e-08)
bones/241/scale = Vector3(1, 1, 1)
bones/251/rotation = Quaternion(0.5, -0.5, 0.5, 0.5)
bones/263/rotation = Quaternion(0.964307, 0.000137102, -0.0004993, -0.264787)
bones/263/scale = Vector3(1, 1, 1)
bones/265/rotation = Quaternion(0.964307, 0.000137102, -0.0004993, 0.264787)
bones/268/rotation = Quaternion(0.102606, 0, 0, 0.994722)
bones/268/scale = Vector3(1, 1, 1)
bones/277/rotation = Quaternion(0.964307, 0.000137102, -0.0004993, -0.264787)
bones/277/scale = Vector3(1, 1, 1)
bones/279/rotation = Quaternion(0.964307, 0.000137102, -0.0004993, 0.264787)
bones/282/rotation = Quaternion(0.102606, 0, 0, 0.994722)
bones/282/scale = Vector3(1, 1, 1)

[node name="DONOTCOPY_ZombieSource" parent="CollisionShape3D/ZombieModel/godot_rig/Skeleton3D" index="0"]
surface_material_override/0 = ExtResource("5_xwux6")

[node name="AnimationTree" type="AnimationTree" parent="CollisionShape3D/ZombieModel"]
tree_root = ExtResource("6_5wb8k")
anim_player = NodePath("../AnimationPlayer")

[node name="LookAt" type="Node3D" parent="CollisionShape3D"]
top_level = true

[node name="Brain_WaitForPlayer" type="Node3D" parent="CollisionShape3D"]
script = ExtResource("7_grrsg")
root = NodePath("../..")

[node name="Brain_FollowPlayer" type="Node3D" parent="CollisionShape3D"]
script = ExtResource("8_27cdu")
root = NodePath("../..")
nextBrainID = 0
SpeedMultiplier = 2.0

[connection signal="OnDamage" from="." to="." method="_on_on_damage"]
[connection signal="body_entered" from="." to="." method="OnTouchDamage"]

[editable path="CollisionShape3D/ZombieModel"]
