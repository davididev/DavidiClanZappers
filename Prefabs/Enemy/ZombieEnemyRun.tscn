[gd_scene load_steps=12 format=3 uid="uid://0d7fefogfmkf"]

[ext_resource type="Script" path="res://Scripts/Global/Enemy/EnemyBase.gd" id="1_ggw3h"]
[ext_resource type="Script" path="res://Scripts/Global/Enemy/BrainTransitionResource.gd" id="2_ny08x"]
[ext_resource type="PackedScene" uid="uid://bj86i4actyt73" path="res://Prefabs/Player/drop_shadow.tscn" id="3_3xe4v"]
[ext_resource type="PackedScene" uid="uid://cnp447641kcs8" path="res://Graphics/Enemies/Zombie/ZombieModel.glb" id="4_ewetc"]
[ext_resource type="Material" uid="uid://d0xqxu0rjsjhg" path="res://Graphics/Enemies/Zombie/M_Zombie.tres" id="5_xwux6"]
[ext_resource type="AnimationNodeStateMachine" uid="uid://7r0722bkb4r" path="res://Graphics/Enemies/Zombie/ZomibeRun.tres" id="6_5wb8k"]
[ext_resource type="Script" path="res://Scripts/Global/Enemy/BrainWaitForPlayer.gd" id="7_grrsg"]
[ext_resource type="Script" path="res://Scripts/Global/Enemy/BrainFollowPlayer.gd" id="8_27cdu"]

[sub_resource type="Resource" id="Resource_rjeb3"]
script = ExtResource("2_ny08x")
cond = Array[int]([0, 2])
values = Array[float]([0.9, 12.0])
operator = 1

[sub_resource type="Resource" id="Resource_75s4d"]
script = ExtResource("2_ny08x")
cond = Array[int]([3])
values = Array[float]([1.0])
operator = 0

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_h5276"]
radius = 0.9

[node name="ZombieRun" type="RigidBody3D" groups=["SerializedNode"]]
top_level = true
collision_layer = 16
collision_mask = 7
axis_lock_angular_x = true
axis_lock_angular_z = true
contact_monitor = true
max_contacts_reported = 2
linear_damp_mode = 1
linear_damp = 200.0
angular_damp = 200.0
script = ExtResource("1_ggw3h")
renderers = Array[NodePath]([NodePath("CollisionShape3D/ZombieModel/godot_rig/GeneralSkeleton/DONOTCOPY_ZombieSource")])
look_at_transform = NodePath("CollisionShape3D/LookAt")
TouchDamage = 8
MaxHealth = 24.0
tree = NodePath("CollisionShape3D/ZombieModel/AnimationTree")
brains = Array[NodePath]([NodePath("CollisionShape3D/Brain_WaitForPlayer"), NodePath("CollisionShape3D/Brain_FollowPlayer")])
brainTransitions = Array[ExtResource("2_ny08x")]([SubResource("Resource_rjeb3"), SubResource("Resource_75s4d")])
IdleName = "Idle"
MoveName = "Run"
maxCoinsOnDeath = 5
chanceOfHeart = 30

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_h5276")

[node name="DropShadow" parent="CollisionShape3D" instance=ExtResource("3_3xe4v")]

[node name="ZombieModel" parent="CollisionShape3D" instance=ExtResource("4_ewetc")]

[node name="GeneralSkeleton" parent="CollisionShape3D/ZombieModel/godot_rig" index="0"]
bones/1/position = Vector3(8.88184e-16, 0.0501, 0.3167)
bones/2/rotation = Quaternion(-0.0920321, -1.18703e-07, -1.09711e-08, 0.995756)
bones/2/scale = Vector3(1, 1, 1)
bones/3/rotation = Quaternion(-0.0499216, 2.50144e-14, -5.28255e-16, 0.998753)
bones/3/scale = Vector3(1, 1, 1)
bones/4/rotation = Quaternion(-0.0142061, 1.19197e-07, -1.6935e-09, 0.999899)
bones/4/scale = Vector3(1, 1, 1)
bones/11/rotation = Quaternion(0.564304, 0.434213, -0.549033, 0.437703)
bones/11/scale = Vector3(0.986112, 1.02837, 0.986112)
bones/12/rotation = Quaternion(0.000589473, -0.000633049, -1.34174e-07, 1)
bones/12/scale = Vector3(0.99203, 1.01613, 0.99203)
bones/13/rotation = Quaternion(0.137475, 0.0365696, -0.304295, 0.941896)
bones/13/scale = Vector3(1.00194, 0.983537, 1.0171)
bones/21/rotation = Quaternion(0.530442, -0.454273, 0.559528, 0.446314)
bones/21/scale = Vector3(0.986603, 1.02734, 0.986603)
bones/22/rotation = Quaternion(0.000590155, -0.000688113, 5.20467e-07, 1)
bones/22/scale = Vector3(0.990194, 1.0199, 0.990194)
bones/23/rotation = Quaternion(0.152963, -0.0697639, 0.301358, 0.938573)
bones/23/scale = Vector3(1.00358, 0.983535, 1.01583)
bones/27/rotation = Quaternion(-0.247413, 0.945795, 0.203441, -0.0535838)
bones/32/rotation = Quaternion(0.99387, 1.4747e-07, 2.20408e-07, 0.110556)
bones/32/scale = Vector3(1.00189, 0.996245, 1.00189)
bones/33/rotation = Quaternion(0.288708, -7.38509e-08, 1.35363e-07, 0.957417)
bones/33/scale = Vector3(1.00036, 0.997318, 1.00235)
bones/34/rotation = Quaternion(-0.709532, -0.000364676, 0.000367635, 0.704673)
bones/34/scale = Vector3(0.997765, 0.997776, 1.00448)
bones/35/rotation = Quaternion(-0.000137185, 0.964307, -0.264787, -0.000499277)
bones/36/rotation = Quaternion(0.976208, 5.9678e-08, 2.23485e-07, 0.216836)
bones/36/scale = Vector3(1.00224, 0.995547, 1.00224)
bones/37/rotation = Quaternion(0.308786, -1.02081e-07, 9.41188e-08, 0.951132)
bones/37/scale = Vector3(1.00043, 0.996512, 1.0031)
bones/38/rotation = Quaternion(-0.691468, -0.000373973, 0.000358134, 0.722407)
bones/38/scale = Vector3(0.997345, 0.997343, 1.00534)
bones/39/rotation = Quaternion(-0.000137102, 0.964307, -0.264787, -0.0004993)
bones/39/scale = Vector3(1, 1, 1)
bones/40/position = Vector3(0.279047, -0.126188, 0.864261)
bones/40/rotation = Quaternion(0.101362, 0.786691, -0.0818919, 0.603438)
bones/40/scale = Vector3(1, 43.3073, 1)
bones/41/position = Vector3(-0.325662, -0.14199, 0.853121)
bones/41/rotation = Quaternion(0.102906, -0.783238, 0.0713514, 0.608981)
bones/41/scale = Vector3(1, 46.2051, 1)
bones/42/position = Vector3(0.149, 0.00167368, 0.1822)
bones/42/rotation = Quaternion(0.994724, -1.63645e-08, 1.63645e-08, -0.102584)
bones/42/scale = Vector3(1, 21.3952, 1)
bones/43/position = Vector3(-0.169, -0.0195857, 0.184621)
bones/43/rotation = Quaternion(0.992118, 2.91972e-08, -2.91972e-08, -0.125307)
bones/43/scale = Vector3(1, 19.0436, 1)
bones/50/position = Vector3(0, -0.223617, -7.69622e-09)
bones/54/rotation = Quaternion(0.99387, 4.13301e-08, 2.41954e-07, 0.110556)
bones/54/scale = Vector3(0.996245, 0.996245, 0.996245)
bones/55/rotation = Quaternion(0.288707, -1.14133e-07, 3.44165e-08, 0.957418)
bones/55/scale = Vector3(0.999277, 0.999277, 0.999277)
bones/56/rotation = Quaternion(-0.70951, -0.000364895, 0.000367409, 0.704696)
bones/56/scale = Vector3(1.0045, 1.0045, 1.0045)
bones/57/rotation = Quaternion(-0.000137102, 0.964307, -0.264787, -0.0004993)
bones/61/scale = Vector3(1.0045, 1.0045, 1.0045)
bones/63/scale = Vector3(1.0045, 1.0045, 1.0045)
bones/65/scale = Vector3(1.00378, 1.00378, 1.00378)
bones/66/scale = Vector3(1.00378, 1.00378, 1.00378)
bones/68/rotation = Quaternion(0.976208, 1.74021e-08, 2.37554e-07, 0.216836)
bones/68/scale = Vector3(0.995547, 0.995548, 0.995546)
bones/69/rotation = Quaternion(0.308786, -1.13384e-07, 3.68101e-08, 0.951132)
bones/69/scale = Vector3(0.999141, 0.999141, 0.999141)
bones/70/rotation = Quaternion(-0.691449, -0.000374068, 0.000358035, 0.722425)
bones/70/scale = Vector3(1.00535, 1.00535, 1.00535)
bones/71/rotation = Quaternion(-0.000137102, 0.964307, -0.264787, -0.0004993)
bones/75/scale = Vector3(1.00535, 1.00535, 1.00535)
bones/77/scale = Vector3(1.00535, 1.00535, 1.00535)
bones/79/scale = Vector3(1.00448, 1.00448, 1.00448)
bones/80/scale = Vector3(1.00448, 1.00448, 1.00448)
bones/88/rotation = Quaternion(-0.000137096, 0.964307, -0.264787, -0.000499319)
bones/90/rotation = Quaternion(-0.593851, 1.53806e-07, -1.76777e-07, 0.804575)
bones/91/rotation = Quaternion(-0.133767, 2.68227e-09, -5.65009e-08, 0.991013)
bones/91/scale = Vector3(0.996245, 0.996245, 0.996245)
bones/92/rotation = Quaternion(0.288707, -1.14133e-07, 3.44165e-08, 0.957418)
bones/92/scale = Vector3(0.999277, 0.999278, 0.999278)
bones/93/rotation = Quaternion(0.99387, 7.3392e-08, 2.28648e-07, 0.110556)
bones/101/rotation = Quaternion(-0.000137096, 0.964307, -0.264787, -0.000499319)
bones/103/rotation = Quaternion(-0.669899, 1.43732e-07, -1.9275e-07, 0.742452)
bones/104/rotation = Quaternion(-0.143228, -2.51784e-09, -1.7073e-08, 0.98969)
bones/104/scale = Vector3(0.995547, 0.995546, 0.995546)
bones/105/rotation = Quaternion(0.308786, -1.13384e-07, 3.68102e-08, 0.951132)
bones/105/scale = Vector3(0.999141, 0.999141, 0.999141)
bones/106/rotation = Quaternion(0.976208, 3.09798e-08, 2.32089e-07, 0.216835)
bones/113/position = Vector3(0, -8.17463e-08, -2.58607e-09)
bones/135/rotation = Quaternion(0.564212, 0.43414, -0.549127, 0.437775)
bones/135/scale = Vector3(1.02837, 1.02837, 1.02837)
bones/136/rotation = Quaternion(0.000588857, -7.04515e-05, 2.17369e-08, 1)
bones/136/scale = Vector3(1.01613, 1.01613, 1.01613)
bones/137/rotation = Quaternion(0.139553, 0.0360028, -0.304827, 0.94144)
bones/137/scale = Vector3(0.956977, 0.956977, 0.956977)
bones/164/rotation = Quaternion(0.999999, 2.87553e-09, -0.0011849, -7.47366e-09)
bones/168/scale = Vector3(0.956977, 0.956977, 0.956977)
bones/170/rotation = Quaternion(7.96346e-08, 0.0185388, -4.00607e-08, 0.999828)
bones/170/scale = Vector3(0.956977, 0.956977, 0.956977)
bones/172/scale = Vector3(0.972416, 0.972417, 0.972417)
bones/173/rotation = Quaternion(-3.07399e-09, 0.000302176, 2.36628e-07, 1)
bones/173/scale = Vector3(0.972416, 0.972416, 0.972416)
bones/181/rotation = Quaternion(0.705108, 0.0966341, -0.694226, 0.107403)
bones/182/rotation = Quaternion(-0.000230113, 1.77458e-07, 9.6004e-08, 1)
bones/182/scale = Vector3(1.02837, 1.02837, 1.02837)
bones/183/rotation = Quaternion(0.000588866, -7.04511e-05, 3.48095e-08, 1)
bones/183/scale = Vector3(1.01613, 1.01613, 1.01613)
bones/184/rotation = Quaternion(0.564304, 0.434213, -0.549033, 0.437703)
bones/187/rotation = Quaternion(0.530607, -0.454403, 0.559373, 0.446179)
bones/187/scale = Vector3(1.02734, 1.02734, 1.02734)
bones/188/rotation = Quaternion(0.0005896, -1.01866e-05, 3.19044e-08, 1)
bones/188/scale = Vector3(1.0199, 1.0199, 1.0199)
bones/189/rotation = Quaternion(0.155735, -0.0687332, 0.301944, 0.938004)
bones/189/scale = Vector3(0.954389, 0.954389, 0.954389)
bones/193/rotation = Quaternion(-0.247413, 0.945795, 0.203441, -0.0535838)
bones/197/rotation = Quaternion(-0.247413, 0.945795, 0.203441, -0.053584)
bones/210/rotation = Quaternion(-0.247413, 0.945795, 0.20344, -0.0535842)
bones/219/rotation = Quaternion(-0.247413, 0.945795, 0.203441, -0.0535838)
bones/220/scale = Vector3(0.954389, 0.954389, 0.954389)
bones/222/rotation = Quaternion(1.99943e-07, -0.0354468, 1.92531e-07, 0.999372)
bones/222/scale = Vector3(0.954389, 0.954389, 0.954389)
bones/224/scale = Vector3(0.973385, 0.973385, 0.973385)
bones/225/rotation = Quaternion(1.74451e-07, 0.000431544, -2.13098e-07, 1)
bones/225/scale = Vector3(0.973384, 0.973384, 0.973385)
bones/233/rotation = Quaternion(0.685986, -0.13091, 0.707298, 0.109615)
bones/234/rotation = Quaternion(-0.000217284, -1.67023e-07, -1.22262e-07, 1)
bones/234/scale = Vector3(1.02734, 1.02734, 1.02734)
bones/235/rotation = Quaternion(0.000589579, -1.01881e-05, 2.67083e-08, 1)
bones/235/scale = Vector3(1.0199, 1.0199, 1.0199)
bones/236/rotation = Quaternion(0.530442, -0.454273, 0.559528, 0.446314)
bones/246/position = Vector3(-0.2, -0.392952, 0.00704775)
bones/246/rotation = Quaternion(0.674379, 0.212631, -0.67438, -0.212631)
bones/247/position = Vector3(0.0461041, -0.0634575, 0.0233397)
bones/249/rotation = Quaternion(0, -5.96047e-08, 1, -9.0972e-09)
bones/251/position = Vector3(0.2, -0.385905, -0.0140955)
bones/251/rotation = Quaternion(0.669702, -0.226935, 0.669702, -0.226935)
bones/252/position = Vector3(-0.0331815, -0.0468754, 0.0203168)
bones/256/position = Vector3(0, 0.0146471, 0.00963628)
bones/256/rotation = Quaternion(0.0368731, 0, 0, 0.99932)
bones/263/rotation = Quaternion(0.964307, 0.000137102, -0.0004993, -0.264787)
bones/264/position = Vector3(1.46395e-08, 5.32309e-09, -5.51673e-10)
bones/266/rotation = Quaternion(-4.07453e-10, 1.42109e-14, 1, 2.91038e-11)
bones/267/position = Vector3(0.149, 0.1446, 0.177)
bones/270/position = Vector3(0, -0.0189967, 0.00423996)
bones/270/rotation = Quaternion(-0.0245557, 0, 0, 0.999698)
bones/277/rotation = Quaternion(0.964307, 0.000137102, -0.0004993, -0.264787)
bones/278/position = Vector3(3.38368e-09, 3.11522e-09, 4.35538e-09)
bones/280/rotation = Quaternion(-4.07453e-10, 1.42109e-14, 1, 2.91038e-11)
bones/281/position = Vector3(-0.169, 0.1446, 0.177)

[node name="DONOTCOPY_ZombieSource" parent="CollisionShape3D/ZombieModel/godot_rig/GeneralSkeleton" index="0"]
surface_material_override/0 = ExtResource("5_xwux6")

[node name="AnimationTree" type="AnimationTree" parent="CollisionShape3D/ZombieModel"]
tree_root = ExtResource("6_5wb8k")
anim_player = NodePath("../AnimationPlayer")

[node name="LookAt" type="Node3D" parent="CollisionShape3D"]
top_level = true

[node name="Brain_WaitForPlayer" type="Node3D" parent="CollisionShape3D"]
script = ExtResource("7_grrsg")
root = NodePath("../..")

[node name="Brain_FollowPlayer" type="Node3D" parent="CollisionShape3D"]
script = ExtResource("8_27cdu")
root = NodePath("../..")
nextBrainID = 0
SpeedMultiplier = 3.0

[connection signal="OnDamage" from="." to="." method="_on_on_damage"]
[connection signal="body_entered" from="." to="." method="OnTouchDamage"]

[editable path="CollisionShape3D/ZombieModel"]
