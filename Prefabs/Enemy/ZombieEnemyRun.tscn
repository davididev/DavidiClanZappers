[gd_scene load_steps=12 format=3 uid="uid://0d7fefogfmkf"]

[ext_resource type="Script" path="res://Scripts/Global/Enemy/EnemyBase.gd" id="1_ggw3h"]
[ext_resource type="Script" path="res://Scripts/Global/Enemy/BrainTransitionResource.gd" id="2_ny08x"]
[ext_resource type="PackedScene" uid="uid://bj86i4actyt73" path="res://Prefabs/Player/drop_shadow.tscn" id="3_3xe4v"]
[ext_resource type="PackedScene" uid="uid://cnp447641kcs8" path="res://Graphics/Enemies/Zombie/ZombieModel.glb" id="4_ewetc"]
[ext_resource type="Material" uid="uid://d0xqxu0rjsjhg" path="res://Graphics/Enemies/Zombie/M_Zombie.tres" id="5_xwux6"]
[ext_resource type="AnimationNodeStateMachine" uid="uid://7r0722bkb4r" path="res://Graphics/Enemies/Zombie/ZomibeRun.tres" id="6_5wb8k"]
[ext_resource type="Script" path="res://Scripts/Global/Enemy/BrainWaitForPlayer.gd" id="7_grrsg"]
[ext_resource type="Script" path="res://Scripts/Global/Enemy/BrainFollowPlayer.gd" id="8_27cdu"]

[sub_resource type="Resource" id="Resource_rjeb3"]
script = ExtResource("2_ny08x")
cond = Array[int]([0, 2])
values = Array[float]([0.9, 12.0])
operator = 1

[sub_resource type="Resource" id="Resource_75s4d"]
script = ExtResource("2_ny08x")
cond = Array[int]([3])
values = Array[float]([1.0])
operator = 0

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_h5276"]
radius = 0.9

[node name="ZombieRun" type="RigidBody3D" groups=["SerializedNode"]]
top_level = true
collision_layer = 16
collision_mask = 7
axis_lock_angular_x = true
axis_lock_angular_z = true
contact_monitor = true
max_contacts_reported = 2
linear_damp_mode = 1
linear_damp = 200.0
angular_damp = 200.0
script = ExtResource("1_ggw3h")
renderers = Array[NodePath]([NodePath("CollisionShape3D/ZombieModel/godot_rig/GeneralSkeleton/DONOTCOPY_ZombieSource")])
look_at_transform = NodePath("CollisionShape3D/LookAt")
TouchDamage = 8
MaxHealth = 24.0
tree = NodePath("CollisionShape3D/ZombieModel/AnimationTree")
brains = Array[NodePath]([NodePath("CollisionShape3D/Brain_WaitForPlayer"), NodePath("CollisionShape3D/Brain_FollowPlayer")])
brainTransitions = Array[ExtResource("2_ny08x")]([SubResource("Resource_rjeb3"), SubResource("Resource_75s4d")])
IdleName = "Idle"
MoveName = "Run"
maxCoinsOnDeath = 5
chanceOfHeart = 30

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_h5276")

[node name="DropShadow" parent="CollisionShape3D" instance=ExtResource("3_3xe4v")]

[node name="ZombieModel" parent="CollisionShape3D" instance=ExtResource("4_ewetc")]

[node name="GeneralSkeleton" parent="CollisionShape3D/ZombieModel/godot_rig" index="0"]
bones/1/position = Vector3(8.88184e-16, 0.0501, 0.3167)
bones/2/rotation = Quaternion(-0.0920321, -1.18703e-07, -1.09711e-08, 0.995756)
bones/2/scale = Vector3(1, 1, 1)
bones/3/rotation = Quaternion(-0.0499216, 2.50144e-14, -5.28255e-16, 0.998753)
bones/3/scale = Vector3(1, 1, 1)
bones/4/rotation = Quaternion(-0.0142061, 1.19197e-07, -1.6935e-09, 0.999899)
bones/4/scale = Vector3(1, 1, 1)
bones/11/rotation = Quaternion(0.333877, 0.50831, -0.67384, 0.419627)
bones/11/scale = Vector3(0.986112, 1.02837, 0.986112)
bones/12/rotation = Quaternion(0.000589531, 0.0036583, -2.69054e-06, 0.999993)
bones/12/scale = Vector3(0.992029, 1.01613, 0.99203)
bones/13/rotation = Quaternion(0.15072, 0.23188, -0.119848, 0.953494)
bones/13/scale = Vector3(1.02052, 0.966705, 1.01476)
bones/21/rotation = Quaternion(0.693597, -0.418251, 0.234233, 0.537703)
bones/21/scale = Vector3(0.986603, 1.02734, 0.986603)
bones/22/rotation = Quaternion(0.000590131, 0.00452739, -1.98895e-06, 0.99999)
bones/22/scale = Vector3(0.990194, 1.0199, 0.990194)
bones/23/rotation = Quaternion(0.265379, 0.232197, 0.257438, 0.899658)
bones/23/scale = Vector3(0.999912, 0.988077, 1.01504)
bones/27/rotation = Quaternion(-0.247413, 0.945795, 0.203441, -0.0535838)
bones/32/rotation = Quaternion(0.945717, 6.07775e-08, 2.24422e-07, 0.32499)
bones/32/scale = Vector3(0.98444, 1.03186, 0.984439)
bones/33/rotation = Quaternion(0.00445215, -1.26475e-07, -7.18058e-09, 0.99999)
bones/33/scale = Vector3(0.99731, 1.00541, 0.997306)
bones/34/rotation = Quaternion(-0.592069, -0.000416276, 0.000309044, 0.805887)
bones/34/scale = Vector3(1.01855, 1.0139, 0.968813)
bones/35/rotation = Quaternion(-0.000137185, 0.964307, -0.264787, -0.000499277)
bones/36/rotation = Quaternion(0.960813, 2.92611e-09, 2.03833e-07, -0.277199)
bones/36/scale = Vector3(1.00138, 0.997242, 1.00138)
bones/37/rotation = Quaternion(0.266409, -6.31481e-08, -5.41429e-08, 0.96386)
bones/37/scale = Vector3(1.00024, 0.998597, 1.00118)
bones/38/rotation = Quaternion(-0.744516, -0.000345394, 0.00038586, 0.667604)
bones/38/scale = Vector3(0.998365, 0.998405, 1.00324)
bones/39/rotation = Quaternion(-0.000137102, 0.964307, -0.264787, -0.0004993)
bones/39/scale = Vector3(1, 1, 1)
bones/40/position = Vector3(0.290733, -0.103633, 0.779917)
bones/40/rotation = Quaternion(0.146538, 0.775188, -0.014318, 0.614333)
bones/40/scale = Vector3(1, 41.8189, 1)
bones/41/position = Vector3(-0.330796, -0.100288, 0.981768)
bones/41/rotation = Quaternion(0.0342831, -0.790303, 0.167697, 0.588323)
bones/41/scale = Vector3(1, 43.9402, 1)
bones/42/position = Vector3(0.149, -0.0426069, 0.187211)
bones/42/rotation = Quaternion(0.988206, -7.98084e-08, 7.98084e-08, -0.153128)
bones/42/scale = Vector3(1, 16.5235, 1)
bones/43/position = Vector3(-0.169, 0.0710756, 0.213671)
bones/43/rotation = Quaternion(0.990829, -6.19378e-08, 6.19378e-08, -0.135122)
bones/43/scale = Vector3(1, 30.179, 1)
bones/50/position = Vector3(0, -0.223617, -7.69622e-09)
bones/54/rotation = Quaternion(0.945717, 4.53776e-08, 2.19766e-07, 0.32499)
bones/54/scale = Vector3(1.03186, 1.03187, 1.03186)
bones/55/rotation = Quaternion(0.0044478, -1.19208e-07, 5.30219e-10, 0.99999)
bones/55/scale = Vector3(1.00534, 1.00534, 1.00534)
bones/56/rotation = Quaternion(-0.592301, -0.00041722, 0.000306712, 0.805717)
bones/56/scale = Vector3(0.963844, 0.963845, 0.963844)
bones/57/rotation = Quaternion(-0.000137102, 0.964307, -0.264787, -0.0004993)
bones/61/scale = Vector3(0.963844, 0.963845, 0.963845)
bones/63/scale = Vector3(0.963844, 0.963845, 0.963845)
bones/65/scale = Vector3(0.969122, 0.969122, 0.969122)
bones/66/scale = Vector3(0.969122, 0.969117, 0.969117)
bones/68/rotation = Quaternion(0.960813, 1.92472e-08, 2.63934e-07, -0.277199)
bones/68/scale = Vector3(0.99724, 0.997243, 0.997238)
bones/69/rotation = Quaternion(0.266408, -1.14901e-07, 3.17583e-08, 0.96386)
bones/69/scale = Vector3(0.999622, 0.999622, 0.999622)
bones/70/rotation = Quaternion(-0.744489, -0.000345722, 0.000385501, 0.667635)
bones/70/scale = Vector3(1.00329, 1.00329, 1.00329)
bones/71/rotation = Quaternion(-0.000137102, 0.964307, -0.264787, -0.0004993)
bones/75/scale = Vector3(1.00329, 1.00329, 1.00329)
bones/77/scale = Vector3(1.00329, 1.00329, 1.00329)
bones/79/scale = Vector3(1.00277, 1.00277, 1.00277)
bones/80/scale = Vector3(1.00277, 1.00277, 1.00277)
bones/88/rotation = Quaternion(-0.000137096, 0.964307, -0.264787, -0.000499319)
bones/90/rotation = Quaternion(-0.835172, 1.42579e-07, -1.869e-07, 0.549989)
bones/91/rotation = Quaternion(-0.00205008, -1.97146e-10, 6.78138e-09, 0.999998)
bones/91/scale = Vector3(1.03186, 1.03186, 1.03186)
bones/92/rotation = Quaternion(0.00444779, -1.19208e-07, 5.30214e-10, 0.99999)
bones/92/scale = Vector3(1.00534, 1.00534, 1.00534)
bones/93/rotation = Quaternion(0.945717, 6.07771e-08, 2.24422e-07, 0.32499)
bones/101/rotation = Quaternion(-0.000137096, 0.964307, -0.264787, -0.000499319)
bones/103/rotation = Quaternion(-0.25197, 1.75821e-07, -1.03158e-07, 0.967735)
bones/104/rotation = Quaternion(-0.123314, 9.0317e-09, -1.08275e-07, 0.992368)
bones/104/scale = Vector3(0.99724, 0.99724, 0.99724)
bones/105/rotation = Quaternion(0.266408, -1.14901e-07, 3.17583e-08, 0.96386)
bones/105/scale = Vector3(0.999622, 0.999622, 0.999622)
bones/106/rotation = Quaternion(0.960813, 3.59908e-08, 2.14793e-07, -0.277199)
bones/113/position = Vector3(0, -8.17463e-08, -2.58607e-09)
bones/135/rotation = Quaternion(0.336283, 0.510751, -0.671504, 0.418485)
bones/135/scale = Vector3(1.02837, 1.02837, 1.02837)
bones/136/rotation = Quaternion(0.000588853, -7.0459e-05, 2.1874e-08, 1)
bones/136/scale = Vector3(1.01613, 1.01613, 1.01613)
bones/137/rotation = Quaternion(0.152272, 0.230984, -0.117863, 0.953713)
bones/137/scale = Vector3(0.956977, 0.956977, 0.956977)
bones/164/rotation = Quaternion(0.999999, 2.87553e-09, -0.0011849, -7.47366e-09)
bones/168/scale = Vector3(0.956977, 0.956977, 0.956977)
bones/170/rotation = Quaternion(2.8655e-08, 0.117382, 6.72153e-08, 0.993087)
bones/170/scale = Vector3(0.956977, 0.956977, 0.956977)
bones/172/scale = Vector3(0.972416, 0.972417, 0.972417)
bones/173/rotation = Quaternion(4.56094e-07, -0.00217667, 3.66188e-07, 0.999998)
bones/173/scale = Vector3(0.972411, 0.97241, 0.972414)
bones/181/rotation = Quaternion(0.544878, 0.275394, -0.791482, 0.0286753)
bones/182/rotation = Quaternion(-0.00023005, 1.87502e-07, 9.61298e-08, 1)
bones/182/scale = Vector3(1.02837, 1.02837, 1.02837)
bones/183/rotation = Quaternion(0.000588853, -7.04612e-05, 3.50064e-08, 1)
bones/183/scale = Vector3(1.01613, 1.01613, 1.01613)
bones/184/rotation = Quaternion(0.333877, 0.50831, -0.67384, 0.419627)
bones/187/rotation = Quaternion(0.692535, -0.415793, 0.237383, 0.539593)
bones/187/scale = Vector3(1.02734, 1.02734, 1.02734)
bones/188/rotation = Quaternion(0.00110729, -1.01978e-05, 3.21116e-08, 0.999999)
bones/188/scale = Vector3(1.0199, 1.0199, 1.0199)
bones/189/rotation = Quaternion(0.265451, 0.228767, 0.261353, 0.899386)
bones/189/scale = Vector3(0.954389, 0.954389, 0.954389)
bones/193/rotation = Quaternion(-0.247413, 0.945795, 0.203441, -0.0535838)
bones/197/rotation = Quaternion(-0.247413, 0.945795, 0.203441, -0.053584)
bones/210/rotation = Quaternion(-0.247413, 0.945795, 0.20344, -0.0535842)
bones/219/rotation = Quaternion(-0.247413, 0.945795, 0.203441, -0.0535838)
bones/220/scale = Vector3(0.954389, 0.954389, 0.954389)
bones/222/rotation = Quaternion(-8.22483e-08, 0.119606, 4.07978e-07, 0.992822)
bones/222/scale = Vector3(0.954389, 0.954389, 0.954389)
bones/224/scale = Vector3(0.973385, 0.973385, 0.973385)
bones/225/rotation = Quaternion(8.01752e-08, -0.0022713, -3.28278e-07, 0.999997)
bones/225/scale = Vector3(0.973383, 0.973383, 0.973384)
bones/233/rotation = Quaternion(0.807483, -0.0171689, 0.474125, 0.350545)
bones/234/rotation = Quaternion(-0.000407082, -1.63494e-07, -7.31547e-08, 1)
bones/234/scale = Vector3(1.02734, 1.02734, 1.02734)
bones/235/rotation = Quaternion(0.00110726, -1.01941e-05, 2.68046e-08, 0.999999)
bones/235/scale = Vector3(1.0199, 1.0199, 1.0199)
bones/236/rotation = Quaternion(0.693596, -0.418251, 0.234233, 0.537704)
bones/246/position = Vector3(-0.2, -0.288179, -0.137227)
bones/246/rotation = Quaternion(0.674379, 0.212631, -0.67438, -0.212631)
bones/247/position = Vector3(0.00242182, -0.0113023, 0.00414049)
bones/249/rotation = Quaternion(0, -5.96047e-08, 1, -9.0972e-09)
bones/251/position = Vector3(0.2, -0.288179, 0.210075)
bones/251/rotation = Quaternion(0.706827, -0.0198943, 0.706827, -0.0198945)
bones/252/position = Vector3(-0.0200849, -0.0245762, 0.012157)
bones/256/position = Vector3(0, -0.116188, -0.00491051)
bones/256/rotation = Quaternion(-0.312159, 0, 0, 0.95003)
bones/263/rotation = Quaternion(0.964307, 0.000137102, -0.0004993, -0.264787)
bones/264/position = Vector3(-7.55761e-06, -0.00222236, -0.0073106)
bones/266/rotation = Quaternion(-4.07453e-10, 1.42109e-14, 1, 2.91038e-11)
bones/267/position = Vector3(0.149, 0.1446, 0.177)
bones/270/position = Vector3(0, 0.117894, 0.0917346)
bones/270/rotation = Quaternion(0.346993, 0, 0, 0.937868)
bones/277/rotation = Quaternion(0.964307, 0.000137102, -0.0004993, -0.264787)
bones/278/position = Vector3(-2.48758e-09, 4.16928e-09, -1.59474e-08)
bones/280/rotation = Quaternion(-4.07453e-10, 1.42109e-14, 1, 2.91038e-11)
bones/281/position = Vector3(-0.169, 0.1446, 0.177)

[node name="DONOTCOPY_ZombieSource" parent="CollisionShape3D/ZombieModel/godot_rig/GeneralSkeleton" index="0"]
surface_material_override/0 = ExtResource("5_xwux6")

[node name="AnimationTree" type="AnimationTree" parent="CollisionShape3D/ZombieModel"]
tree_root = ExtResource("6_5wb8k")
anim_player = NodePath("../AnimationPlayer")

[node name="LookAt" type="Node3D" parent="CollisionShape3D"]
top_level = true

[node name="Brain_WaitForPlayer" type="Node3D" parent="CollisionShape3D"]
script = ExtResource("7_grrsg")
root = NodePath("../..")

[node name="Brain_FollowPlayer" type="Node3D" parent="CollisionShape3D"]
script = ExtResource("8_27cdu")
root = NodePath("../..")
nextBrainID = 0
SpeedMultiplier = 3.0

[connection signal="OnDamage" from="." to="." method="_on_on_damage"]
[connection signal="body_entered" from="." to="." method="OnTouchDamage"]

[editable path="CollisionShape3D/ZombieModel"]
