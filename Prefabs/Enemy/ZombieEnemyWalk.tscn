[gd_scene load_steps=12 format=3 uid="uid://i32dqd0l2wp1"]

[ext_resource type="Script" path="res://Scripts/Global/Enemy/EnemyBase.gd" id="1_qt61u"]
[ext_resource type="Script" path="res://Scripts/Global/Enemy/BrainTransitionResource.gd" id="2_d8ksp"]
[ext_resource type="AnimationNodeStateMachine" uid="uid://cklbyhfbqekjb" path="res://Graphics/Enemies/Zombie/ZombieWalk.tres" id="5_gf5py"]
[ext_resource type="Material" uid="uid://d0xqxu0rjsjhg" path="res://Graphics/Enemies/Zombie/M_Zombie.tres" id="5_sbkhd"]
[ext_resource type="PackedScene" uid="uid://bj86i4actyt73" path="res://Prefabs/Player/drop_shadow.tscn" id="5_v4edu"]
[ext_resource type="PackedScene" uid="uid://cnp447641kcs8" path="res://Graphics/Enemies/Zombie/ZombieModel.glb" id="6_6u4fe"]
[ext_resource type="Script" path="res://Scripts/Global/Enemy/BrainWaitForPlayer.gd" id="6_pfyuy"]
[ext_resource type="Script" path="res://Scripts/Global/Enemy/BrainFollowPlayer.gd" id="7_c8l3j"]

[sub_resource type="Resource" id="Resource_faglr"]
script = ExtResource("2_d8ksp")
cond = Array[int]([0, 2])
values = Array[float]([0.9, 9.0])
operator = 1

[sub_resource type="Resource" id="Resource_eu7n3"]
script = ExtResource("2_d8ksp")
cond = Array[int]([3])
values = Array[float]([1.0])
operator = 0

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_h5276"]
radius = 0.9
height = 1.8

[node name="ZombieWalk" type="RigidBody3D" groups=["SerializedNode"]]
top_level = true
collision_layer = 16
collision_mask = 7
axis_lock_angular_x = true
axis_lock_angular_z = true
contact_monitor = true
max_contacts_reported = 2
linear_damp_mode = 1
linear_damp = 200.0
angular_damp = 200.0
script = ExtResource("1_qt61u")
renderers = Array[NodePath]([NodePath("CollisionShape3D/ZombieModel/godot_rig/GeneralSkeleton/DONOTCOPY_ZombieSource")])
look_at_transform = NodePath("CollisionShape3D/LookAt")
TouchDamage = 8
MaxHealth = 55.0
tree = NodePath("CollisionShape3D/ZombieModel/AnimationTree")
brains = Array[NodePath]([NodePath("CollisionShape3D/Brain_WaitForPlayer"), NodePath("CollisionShape3D/Brain_FollowPlayer")])
brainTransitions = Array[ExtResource("2_d8ksp")]([SubResource("Resource_faglr"), SubResource("Resource_eu7n3")])
IdleName = "Idle"
MoveName = "Walk"
MoveSpeed = 35.0
MaxVelocity = 6.0
maxCoinsOnDeath = 5
chanceOfHeart = 30

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_h5276")

[node name="DropShadow" parent="CollisionShape3D" instance=ExtResource("5_v4edu")]

[node name="ZombieModel" parent="CollisionShape3D" instance=ExtResource("6_6u4fe")]

[node name="GeneralSkeleton" parent="CollisionShape3D/ZombieModel/godot_rig" index="0"]
bones/1/position = Vector3(8.88184e-16, 0.0501, 0.3167)
bones/2/rotation = Quaternion(-0.0920321, -1.18703e-07, -1.09711e-08, 0.995756)
bones/2/scale = Vector3(1, 1, 1)
bones/3/rotation = Quaternion(-0.0499216, 2.50144e-14, -5.28255e-16, 0.998753)
bones/3/scale = Vector3(1, 1, 1)
bones/4/rotation = Quaternion(-0.0142061, 1.19197e-07, -1.6935e-09, 0.999899)
bones/4/scale = Vector3(1, 1, 1)
bones/11/rotation = Quaternion(0.184281, 0.635034, -0.510055, 0.550105)
bones/11/scale = Vector3(1.01757, 0.965773, 1.01757)
bones/12/rotation = Quaternion(0.566557, 0.0460391, -0.0319315, 0.822115)
bones/12/scale = Vector3(1.01047, 0.935342, 1.05871)
bones/13/rotation = Quaternion(-0.150695, 0.171764, -0.20824, 0.951012)
bones/13/scale = Vector3(0.989975, 1.03687, 0.976547)
bones/21/rotation = Quaternion(0.180103, -0.64357, 0.485404, 0.563705)
bones/21/scale = Vector3(1.01798, 0.964982, 1.01798)
bones/22/rotation = Quaternion(0.600815, -0.0409428, 0.0310624, 0.797735)
bones/22/scale = Vector3(1.01341, 0.926748, 1.06519)
bones/23/rotation = Quaternion(-0.161779, -0.1596, 0.222637, 0.948044)
bones/23/scale = Vector3(0.991007, 1.03876, 0.974548)
bones/27/rotation = Quaternion(-0.247413, 0.945795, 0.203441, -0.0535838)
bones/32/rotation = Quaternion(0.644027, 4.98544e-09, 1.72527e-07, 0.765003)
bones/32/scale = Vector3(1.01159, 0.977215, 1.01159)
bones/33/rotation = Quaternion(0.832194, -1.131e-07, 1.91103e-07, 0.554485)
bones/33/scale = Vector3(1.00276, 0.964436, 1.0343)
bones/34/rotation = Quaternion(-0.906979, -0.000212897, 0.000472183, 0.421176)
bones/34/scale = Vector3(0.985524, 1.00418, 1.0114)
bones/35/rotation = Quaternion(-0.000137185, 0.964307, -0.264787, -0.000499277)
bones/36/rotation = Quaternion(0.989869, 3.64106e-09, 2.10626e-07, -0.141987)
bones/36/scale = Vector3(0.984298, 1.03216, 0.984298)
bones/37/rotation = Quaternion(0.00364503, -1.08536e-07, 1.00029e-07, 0.999993)
bones/37/scale = Vector3(0.997249, 1.00553, 0.997246)
bones/38/rotation = Quaternion(-0.710062, -0.000366601, 0.000367034, 0.704139)
bones/38/scale = Vector3(1.01875, 1.01831, 0.963996)
bones/39/rotation = Quaternion(-0.000137102, 0.964307, -0.264787, -0.0004993)
bones/39/scale = Vector3(1, 1, 1)
bones/40/position = Vector3(0.36417, -0.0240369, 0.77721)
bones/40/rotation = Quaternion(0.112604, 0.740926, 0.0329372, 0.66126)
bones/40/scale = Vector3(1, 34.4589, 1)
bones/41/position = Vector3(-0.416331, -0.024838, 0.773476)
bones/41/rotation = Quaternion(0.108471, -0.737948, -0.0356497, 0.665128)
bones/41/scale = Vector3(1, 36.1482, 1)
bones/42/position = Vector3(0.149, -0.0990175, 0.274171)
bones/42/rotation = Quaternion(0.870595, -6.21203e-08, 6.21203e-08, -0.492001)
bones/42/scale = Vector3(1, 17.7221, 1)
bones/43/position = Vector3(-0.169, 0.0516048, 0.193128)
bones/43/rotation = Quaternion(0.994609, -3.59363e-08, 3.59363e-08, -0.103696)
bones/43/scale = Vector3(1, 27.3844, 1)
bones/50/position = Vector3(0, -0.223617, -7.69622e-09)
bones/54/rotation = Quaternion(0.644027, -9.32809e-08, 9.40371e-08, 0.765003)
bones/54/scale = Vector3(0.976897, 0.976902, 0.976892)
bones/55/rotation = Quaternion(0.832143, -6.61089e-08, 9.91991e-08, 0.554561)
bones/55/scale = Vector3(0.994797, 0.994797, 0.994797)
bones/56/rotation = Quaternion(-0.906979, -0.000218013, 0.000469526, 0.421175)
bones/56/scale = Vector3(1.02888, 1.02888, 1.02888)
bones/57/rotation = Quaternion(-0.000137102, 0.964307, -0.264787, -0.0004993)
bones/61/scale = Vector3(1.02888, 1.02888, 1.02888)
bones/63/scale = Vector3(1.02888, 1.02888, 1.02888)
bones/65/scale = Vector3(1.02347, 1.02347, 1.02347)
bones/66/scale = Vector3(1.02347, 1.02347, 1.02347)
bones/68/rotation = Quaternion(0.989869, 7.86215e-08, 2.34296e-07, -0.141987)
bones/68/scale = Vector3(1.03216, 1.03216, 1.03216)
bones/69/rotation = Quaternion(0.00364108, -1.19209e-07, 4.34051e-10, 0.999993)
bones/69/scale = Vector3(1.00552, 1.00552, 1.00552)
bones/70/rotation = Quaternion(-0.710142, -0.000364594, 0.000367762, 0.704058)
bones/70/scale = Vector3(0.963518, 0.963519, 0.963518)
bones/71/rotation = Quaternion(-0.000137102, 0.964307, -0.264787, -0.0004993)
bones/75/scale = Vector3(0.963518, 0.963519, 0.963519)
bones/77/scale = Vector3(0.963518, 0.963519, 0.963518)
bones/79/scale = Vector3(0.968842, 0.968842, 0.968842)
bones/80/scale = Vector3(0.968842, 0.968839, 0.96884)
bones/88/rotation = Quaternion(-0.000137096, 0.964307, -0.264787, -0.000499319)
bones/90/rotation = Quaternion(-0.89173, 2.48221e-07, -4.61999e-08, 0.452568)
bones/91/rotation = Quaternion(-0.416067, 1.5233e-08, -1.35955e-07, 0.909334)
bones/91/scale = Vector3(0.976897, 0.976897, 0.976897)
bones/92/rotation = Quaternion(0.832143, -6.61089e-08, 9.91991e-08, 0.554561)
bones/92/scale = Vector3(0.994797, 0.994797, 0.994797)
bones/93/rotation = Quaternion(0.644027, 6.01902e-09, 1.71241e-07, 0.765003)
bones/101/rotation = Quaternion(-0.000137096, 0.964307, -0.264787, -0.000499319)
bones/103/rotation = Quaternion(-0.492601, 1.10997e-07, -2.20199e-07, 0.870256)
bones/104/rotation = Quaternion(-0.00167847, -4.14041e-10, 1.42376e-08, 0.999999)
bones/104/scale = Vector3(1.03216, 1.03216, 1.03216)
bones/105/rotation = Quaternion(0.00364105, -1.19209e-07, 4.34056e-10, 0.999993)
bones/105/scale = Vector3(1.00552, 1.00553, 1.00553)
bones/106/rotation = Quaternion(0.989869, 7.48528e-08, 2.20841e-07, -0.141987)
bones/113/position = Vector3(0, -8.17463e-08, -2.58607e-09)
bones/135/rotation = Quaternion(0.212888, 0.665188, -0.498797, 0.51323)
bones/135/scale = Vector3(0.965773, 0.965773, 0.965773)
bones/136/rotation = Quaternion(0.567641, -5.79951e-05, 3.99567e-05, 0.823276)
bones/136/scale = Vector3(0.979519, 0.979519, 0.979519)
bones/137/rotation = Quaternion(-0.151954, 0.173103, -0.205711, 0.95112)
bones/137/scale = Vector3(1.0578, 1.0578, 1.0578)
bones/164/rotation = Quaternion(0.999999, 2.87553e-09, -0.0011849, -7.47366e-09)
bones/168/scale = Vector3(1.0578, 1.0578, 1.0578)
bones/170/rotation = Quaternion(-1.50886e-07, 0.0883727, -3.13217e-07, 0.996088)
bones/170/scale = Vector3(1.0578, 1.0578, 1.0578)
bones/172/scale = Vector3(1.03596, 1.03596, 1.03596)
bones/173/rotation = Quaternion(2.62971e-07, -0.0311277, 1.70199e-07, 0.999515)
bones/173/scale = Vector3(1.03596, 1.03596, 1.03596)
bones/181/rotation = Quaternion(0.545639, 0.309392, -0.774672, 0.080239)
bones/182/rotation = Quaternion(-0.219312, 1.81673e-07, -3.09359e-05, 0.975655)
bones/182/scale = Vector3(0.965773, 0.965773, 0.965773)
bones/183/rotation = Quaternion(0.567641, -5.80209e-05, 3.99591e-05, 0.823276)
bones/183/scale = Vector3(0.979519, 0.979519, 0.979519)
bones/184/rotation = Quaternion(0.184281, 0.635034, -0.510055, 0.550105)
bones/187/rotation = Quaternion(0.205003, -0.671905, 0.475428, 0.52961)
bones/187/scale = Vector3(0.965193, 0.965193, 0.965193)
bones/188/rotation = Quaternion(0.601775, -8.14298e-06, 6.21306e-06, 0.798666)
bones/188/scale = Vector3(0.973929, 0.973929, 0.973928)
bones/189/rotation = Quaternion(-0.162803, -0.161128, 0.219772, 0.948279)
bones/189/scale = Vector3(1.06446, 1.06446, 1.06446)
bones/193/rotation = Quaternion(-0.247413, 0.945795, 0.203441, -0.0535838)
bones/197/rotation = Quaternion(-0.247413, 0.945795, 0.203441, -0.053584)
bones/210/rotation = Quaternion(-0.247413, 0.945795, 0.20344, -0.0535842)
bones/219/rotation = Quaternion(-0.247413, 0.945795, 0.203441, -0.0535838)
bones/220/scale = Vector3(1.06446, 1.06446, 1.06446)
bones/222/rotation = Quaternion(-1.01681e-07, -0.0824217, 1.7048e-07, 0.996598)
bones/222/scale = Vector3(1.06446, 1.06446, 1.06446)
bones/224/scale = Vector3(1.03606, 1.03606, 1.03606)
bones/225/rotation = Quaternion(-5.58611e-08, 0.0288047, -8.38779e-08, 0.999585)
bones/225/scale = Vector3(1.03606, 1.03606, 1.03606)
bones/233/rotation = Quaternion(0.547448, -0.32452, 0.763718, 0.108268)
bones/234/rotation = Quaternion(-0.215573, -1.81307e-07, -4.4354e-06, 0.976488)
bones/234/scale = Vector3(0.965193, 0.965193, 0.965193)
bones/235/rotation = Quaternion(0.601775, -8.17834e-06, 6.19364e-06, 0.798666)
bones/235/scale = Vector3(0.973929, 0.973929, 0.973928)
bones/236/rotation = Quaternion(0.180103, -0.64357, 0.485404, 0.563705)
bones/246/position = Vector3(-0.2, -0.201539, -0.0992306)
bones/246/rotation = Quaternion(0.674379, 0.212631, -0.67438, -0.212631)
bones/247/position = Vector3(6.48588e-09, 3.30623e-08, 8.00154e-09)
bones/249/rotation = Quaternion(0, -5.96047e-08, 1, -9.0972e-09)
bones/251/position = Vector3(0.2, -0.201539, -0.0992306)
bones/251/rotation = Quaternion(0.674379, -0.212631, 0.67438, -0.212631)
bones/252/position = Vector3(-8.40927e-08, 4.01877e-08, -3.19619e-08)
bones/256/position = Vector3(0, -0.0968368, 0.0968368)
bones/256/rotation = Quaternion(-0.371432, -8.51719e-17, 0, 0.92846)
bones/263/rotation = Quaternion(0.964307, 0.000137102, -0.0004993, -0.264787)
bones/264/position = Vector3(6.50603e-09, 1.18694e-09, 4.12097e-09)
bones/266/rotation = Quaternion(-4.07453e-10, 1.42109e-14, 1, 2.91038e-11)
bones/267/position = Vector3(0.149, 0.1446, 0.177)
bones/270/position = Vector3(0, 0.0794423, -0.0158885)
bones/277/rotation = Quaternion(0.964307, 0.000137102, -0.0004993, -0.264787)
bones/278/position = Vector3(-3.56648e-05, 0.000169469, -0.0344383)
bones/280/rotation = Quaternion(-4.07453e-10, 1.42109e-14, 1, 2.91038e-11)
bones/281/position = Vector3(-0.169, 0.1446, 0.177)

[node name="DONOTCOPY_ZombieSource" parent="CollisionShape3D/ZombieModel/godot_rig/GeneralSkeleton" index="0"]
surface_material_override/0 = ExtResource("5_sbkhd")

[node name="AnimationTree" type="AnimationTree" parent="CollisionShape3D/ZombieModel"]
tree_root = ExtResource("5_gf5py")
anim_player = NodePath("../AnimationPlayer")

[node name="LookAt" type="Node3D" parent="CollisionShape3D"]
top_level = true

[node name="Brain_WaitForPlayer" type="Node3D" parent="CollisionShape3D"]
script = ExtResource("6_pfyuy")
root = NodePath("../..")

[node name="Brain_FollowPlayer" type="Node3D" parent="CollisionShape3D"]
script = ExtResource("7_c8l3j")
root = NodePath("../..")
nextBrainID = 0
SpeedMultiplier = 1.0

[connection signal="OnDamage" from="." to="." method="_on_on_damage"]
[connection signal="body_entered" from="." to="." method="OnTouchDamage"]

[editable path="CollisionShape3D/ZombieModel"]
